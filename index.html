<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pi Login Token</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h1>Pi Login - Láº¥y Access Token</h1>
  <button id="loginBtn">Login with Pi</button>
  <pre id="log"></pre>

  <script>
    const logEl = document.getElementById("log");
    function log(msg) {
      logEl.textContent += msg + "\n";
      console.log(msg);
    }

    // Production mode, khÃ´ng sandbox
    Pi.init({ version: "2.0", sandbox: true });

    document.getElementById("loginBtn").addEventListener("click", async () => {
      log("ğŸ”„ Báº¯t Ä‘áº§u login...");
      try {
        // Chá»‰ yÃªu cáº§u username
        const scopes = ['username'];
        const user = await Pi.authenticate(scopes);
        log("âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng:");
        log(JSON.stringify(user, null, 2));

        // Access token sáº½ náº±m trong user.accessToken
        if (user.accessToken) {
          log("ğŸ”‘ Access Token:");
          log(user.accessToken);
          alert("Copy Access Token tá»« console hoáº·c log trÃªn trang");
        } else {
          log("âš ï¸ KhÃ´ng tÃ¬m tháº¥y access token");
        }

      } catch (err) {
        log("âŒ Lá»—i login: " + err);
      }
    });
  </script>
</body>
</html>
